
<!DOCTYPE html>

<html>
<!-- tutorial from stack overflow how to record ID https://stackoverflow.com/questions/4825295/onclick-to-get-the-id-of-the-clicked-button tutorial from stack overflow how to record ID https://stackoverflow.com/questions/4825295/onclick-to-get-the-id-of-the-clicked-button -->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>replit</title>
  <link href="style.css" rel="stylesheet" type="text/css" />
</head>

<body>
  <form>
    Please put your name: <input type="text" name= "name", id="name">
    <button id="textinput" type="button" onclick="makePerson()">Accept</button> 
  </form>
  <div > 
    Confirm location
  </div>
<button class="buttonstyle" id= "HOME" onclick="reply_click(this.id)">Home</button>
<button class="buttonstyle" id= "SHOPS" onclick="reply_click(this.id)">Shopping</button>
<button class="buttonstyle" id= "GYM" onclick="reply_click(this.id)">Gym</button>
<button class="buttonstyle" id="WORK" onclick="reply_click(this.id)">Work</button>
<script>
  
  USER = null;
  url = window.location.href

  class Person {
    name;
    id;
    location;
    
    constructor(name, id) {
      this.name = name;
      this.id = name;
    }


    newLocation(location) {
      this.location = location;
    }

    toJSON() {

      return '{ "name":"' + this.name + '", "id":"' + this.id + '", "location": "' + this.location + '"}'; 
    }
  }

  function makePerson() {
    text = document.querySelector("#name");
    name = text.value;

    if (USER == null) {
      USER = new Person(name);
      console.log("New User");
    }

    if (USER.name != name){
        USER = new Person(name);
        console.log("New User");
    }
    console.log("Same user");
    // console.log(text);

  }

  async function reply_click(clicked_id)
  {
    USER.location = clicked_id;
    console.log(USER)

    var options = {method: "PUT", headers: {'Content-Type': 'application/json'}, body: USER.toJSON()}
    r = new Request(url, options=options)

    await fetch(r)

    

    //link with Github database
    // alert(clicked_id);
  }
</script>
</body>

</html>
